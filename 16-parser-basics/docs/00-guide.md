# Phase 16: Parser åŸºç¡€ - å­¦ä¹ æŒ‡å—

## ğŸ“‹ æœ¬é˜¶æ®µæ¦‚è§ˆ

**å­¦ä¹ ç›®æ ‡**ï¼šæ·±å…¥ç†è§£ Parser çš„å·¥ä½œåŸç†ï¼ŒæŒæ¡è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æçš„æ ¸å¿ƒæ¦‚å¿µã€‚

**é¢„è®¡æ—¶é•¿**ï¼š4-5 å¤©

**æ ¸å¿ƒä»·å€¼**ï¼š
- ğŸ¯ ç†è§£ç¼–è¯‘å™¨å‰ç«¯çš„æ ¸å¿ƒç»„ä»¶
- ğŸ¯ æŒæ¡ä»æºä»£ç åˆ° AST çš„å®Œæ•´è¿‡ç¨‹
- ğŸ¯ ç†è§£ä¸åŒ Parser ç®—æ³•çš„å·®å¼‚
- ğŸ¯ èƒ½å¤Ÿæ‰‹å†™ç®€æ˜“ Parser
- ğŸ¯ ä¸ºç†è§£ Babel Parserã€SWC Parser ç­‰æ‰“ä¸‹åŸºç¡€

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

### ç†è®ºå±‚é¢
1. âœ… æ·±åˆ»ç†è§£ Parser çš„å®šä¹‰å’Œä½œç”¨
2. âœ… æŒæ¡è¯æ³•åˆ†æï¼ˆTokenizationï¼‰çš„åŸç†
3. âœ… æŒæ¡è¯­æ³•åˆ†æï¼ˆParsingï¼‰çš„åŸç†
4. âœ… ç†è§£ä¸åŒ Parser ç®—æ³•ï¼ˆé€’å½’ä¸‹é™ã€LLã€LRï¼‰
5. âœ… ç†è§£ Parser å¦‚ä½•æ„å»º AST

### å®è·µå±‚é¢
1. âœ… èƒ½å¤Ÿå®ç°ç®€å•çš„è¯æ³•åˆ†æå™¨ï¼ˆLexerï¼‰
2. âœ… èƒ½å¤Ÿå®ç°ç®€å•çš„è¯­æ³•åˆ†æå™¨ï¼ˆParserï¼‰
3. âœ… èƒ½å¤Ÿæ‰‹å†™ Mini Parserï¼ˆæ•°å­¦è¡¨è¾¾å¼ã€JSONï¼‰
4. âœ… èƒ½å¤Ÿè°ƒè¯• Parser ç›¸å…³é—®é¢˜
5. âœ… ç†è§£ Parser çš„æ€§èƒ½ä¼˜åŒ–

---

## ğŸ“š æ–‡æ¡£åˆ—è¡¨

### 01. Parser æ¦‚è§ˆ (`01-parser-overview.md`)
- Parser çš„å®šä¹‰
- Parser åœ¨ç¼–è¯‘å™¨ä¸­çš„ä½ç½®
- Parser çš„ä¸¤ä¸ªé˜¶æ®µï¼šè¯æ³•åˆ†æ + è¯­æ³•åˆ†æ
- Parser çš„è¾“å…¥å’Œè¾“å‡º
- Parser çš„åˆ†ç±»

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Compiler Frontend
- Lexerï¼ˆè¯æ³•åˆ†æå™¨ï¼‰
- Parserï¼ˆè¯­æ³•åˆ†æå™¨ï¼‰
- Token Stream
- Abstract Syntax Tree

### 02. è¯æ³•åˆ†æè¯¦è§£ (`02-lexical-analysis.md`)
- ä»€ä¹ˆæ˜¯è¯æ³•åˆ†æ
- Token çš„å®šä¹‰å’Œç±»å‹
- è¯æ³•åˆ†æå™¨ï¼ˆLexerï¼‰çš„å®ç°
- æ­£åˆ™è¡¨è¾¾å¼åœ¨è¯æ³•åˆ†æä¸­çš„åº”ç”¨
- çŠ¶æ€æœºæ¨¡å‹
- è¯æ³•åˆ†æçš„ä¼˜åŒ–

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Tokenï¼ˆè¯æ³•å•å…ƒï¼‰
- Lexemeï¼ˆè¯ç´ ï¼‰
- Patternï¼ˆæ¨¡å¼ï¼‰
- Lexerï¼ˆè¯æ³•åˆ†æå™¨ï¼‰
- Finite Automataï¼ˆæœ‰é™è‡ªåŠ¨æœºï¼‰

### 03. è¯­æ³•åˆ†æè¯¦è§£ (`03-syntax-analysis.md`)
- ä»€ä¹ˆæ˜¯è¯­æ³•åˆ†æ
- ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼ˆCFGï¼‰
- è¯­æ³•æ ‘çš„æ„å»º
- æ¨å¯¼å’Œå½’çº¦
- è¯­æ³•åˆ†æçš„æŒ‘æˆ˜

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Context-Free Grammarï¼ˆCFGï¼‰
- Parse Tree vs AST
- Derivationï¼ˆæ¨å¯¼ï¼‰
- Left/Right Recursionï¼ˆå·¦/å³é€’å½’ï¼‰
- Ambiguityï¼ˆäºŒä¹‰æ€§ï¼‰

### 04. è§£æç®—æ³• (`04-parsing-algorithms.md`)
- è‡ªé¡¶å‘ä¸‹è§£æ
  - é€’å½’ä¸‹é™è§£æï¼ˆRecursive Descentï¼‰
  - LL è§£æå™¨
- è‡ªåº•å‘ä¸Šè§£æ
  - LR è§£æå™¨
  - LALR è§£æå™¨
- ç®—æ³•å¯¹æ¯”
- JavaScript Parser ä½¿ç”¨çš„ç®—æ³•

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Top-Down Parsing
- Bottom-Up Parsing
- Recursive Descent
- LL(k)ã€LR(k)
- First/Follow Sets

### 05. æ„å»º AST (`05-build-ast.md`)
- ä» Token æµåˆ° Parse Tree
- ä» Parse Tree åˆ° AST
- AST èŠ‚ç‚¹çš„åˆ›å»º
- AST çš„ä¼˜åŒ–
- é”™è¯¯æ¢å¤

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Parse Tree Construction
- AST Simplification
- Error Recovery
- Panic Mode
- Error Production

### 06. Parser æ€§èƒ½ä¼˜åŒ– (`06-parser-performance.md`)
- Parser çš„æ€§èƒ½ç“¶é¢ˆ
- ä¼˜åŒ–æŠ€æœ¯
  - Memoization
  - Lookahead ä¼˜åŒ–
  - Parallel Parsing
- JavaScript Parser çš„æ€§èƒ½å¯¹æ¯”
- Rust Parser çš„ä¼˜åŠ¿

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Memoization
- Lookahead
- Incremental Parsing
- Parallel Parsing

---

## ğŸ› ï¸ Demo åˆ—è¡¨

### Demo 01: Token ç”Ÿæˆå™¨ (`demos/01-tokenizer/`)

**ç›®æ ‡**ï¼šå®ç°ç®€å•çš„è¯æ³•åˆ†æå™¨ï¼Œå°†ä»£ç è½¬æ¢ä¸º Token æµ

**å†…å®¹**ï¼š
- è¯†åˆ«å…³é”®å­—ï¼ˆ`const`, `let`, `function`, etc.ï¼‰
- è¯†åˆ«æ ‡è¯†ç¬¦
- è¯†åˆ«æ•°å­—å’Œå­—ç¬¦ä¸²
- è¯†åˆ«æ“ä½œç¬¦å’Œæ ‡ç‚¹ç¬¦å·
- å¤„ç†ç©ºæ ¼å’Œæ³¨é‡Š

**æ¶‰åŠæ¦‚å¿µ**ï¼š
- Token ç±»å‹å®šä¹‰
- æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
- çŠ¶æ€æœº

### Demo 02: è¡¨è¾¾å¼ Parser (`demos/02-expression-parser/`)

**ç›®æ ‡**ï¼šæ‰‹å†™æ•°å­¦è¡¨è¾¾å¼ Parser

**å†…å®¹**ï¼š
- è§£ææ•°å­—
- è§£æäºŒå…ƒè¿ç®—ç¬¦ï¼ˆ`+`, `-`, `*`, `/`ï¼‰
- å¤„ç†è¿ç®—ç¬¦ä¼˜å…ˆçº§
- å¤„ç†æ‹¬å·
- æ„å»º AST

**ç¤ºä¾‹**ï¼š
```javascript
// è¾“å…¥
"1 + 2 * 3"

// AST
BinaryExpression {
  operator: "+",
  left: NumericLiteral { value: 1 },
  right: BinaryExpression {
    operator: "*",
    left: NumericLiteral { value: 2 },
    right: NumericLiteral { value: 3 }
  }
}
```

### Demo 03: JSON Parser (`demos/03-json-parser/`)

**ç›®æ ‡**ï¼šæ‰‹å†™å®Œæ•´çš„ JSON Parser

**å†…å®¹**ï¼š
- è§£æ null, boolean, number, string
- è§£ææ•°ç»„
- è§£æå¯¹è±¡
- é”™è¯¯å¤„ç†
- ç”Ÿæˆ AST

**å¯¹æ¯”**ï¼šä¸ `JSON.parse()` çš„åŒºåˆ«

### Demo 04: ç®€æ˜“ JavaScript Parser (`demos/04-mini-js-parser/`)

**ç›®æ ‡**ï¼šæ‰‹å†™ç®€åŒ–ç‰ˆ JavaScript Parser

**å†…å®¹**ï¼š
- è§£æå˜é‡å£°æ˜ï¼ˆ`const`, `let`, `var`ï¼‰
- è§£æå‡½æ•°å£°æ˜
- è§£æè¡¨è¾¾å¼è¯­å¥
- è§£æ if è¯­å¥
- æ„å»º AST

**é™åˆ¶**ï¼š
- åªæ”¯æŒåŸºæœ¬è¯­æ³•
- ä¸æ”¯æŒå¤æ‚ç‰¹æ€§ï¼ˆå¦‚ç®­å¤´å‡½æ•°ã€async/awaitï¼‰

### Demo 05: Parser æ€§èƒ½å¯¹æ¯” (`demos/05-parser-benchmark/`)

**ç›®æ ‡**ï¼šå¯¹æ¯”ä¸åŒ Parser çš„æ€§èƒ½

**å†…å®¹**ï¼š
- æ‰‹å†™ Parser vs Babel Parser
- ä¸åŒè§£æç­–ç•¥çš„æ€§èƒ½å¯¹æ¯”
- æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯éªŒè¯
- çœŸå®ä»£ç æµ‹è¯•

**æµ‹è¯•åœºæ™¯**ï¼š
- å°æ–‡ä»¶ï¼ˆ< 1KBï¼‰
- ä¸­ç­‰æ–‡ä»¶ï¼ˆ1-10KBï¼‰
- å¤§æ–‡ä»¶ï¼ˆ> 100KBï¼‰

---

## ğŸ“ éªŒè¯æ ‡å‡†

å®Œæˆæœ¬é˜¶æ®µå­¦ä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

### ç†è®ºç†è§£
- [ ] èƒ½å¤Ÿå‡†ç¡®è§£é‡Š Parser çš„å·¥ä½œæµç¨‹
- [ ] èƒ½å¤ŸåŒºåˆ†è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æ
- [ ] èƒ½å¤Ÿè§£é‡Šä¸åŒ Parser ç®—æ³•çš„å·®å¼‚
- [ ] èƒ½å¤Ÿç†è§£ Tokenã€Parse Treeã€AST çš„åŒºåˆ«
- [ ] èƒ½å¤Ÿç†è§£ Parser çš„æ€§èƒ½ç“¶é¢ˆ

### å®è·µèƒ½åŠ›
- [ ] èƒ½å¤Ÿæ‰‹å†™ç®€å•çš„ Tokenizer
- [ ] èƒ½å¤Ÿæ‰‹å†™é€’å½’ä¸‹é™ Parser
- [ ] èƒ½å¤Ÿæ‰‹å†™æ•°å­¦è¡¨è¾¾å¼ Parser
- [ ] èƒ½å¤Ÿæ‰‹å†™ JSON Parser
- [ ] èƒ½å¤Ÿè°ƒè¯• Parser ç›¸å…³é—®é¢˜

### ç»¼åˆèƒ½åŠ›
- [ ] èƒ½å¤Ÿç†è§£ Babel Parser çš„å·¥ä½œåŸç†
- [ ] èƒ½å¤Ÿåˆ†æ Parser çš„æ€§èƒ½é—®é¢˜
- [ ] èƒ½å¤Ÿé€‰æ‹©åˆé€‚çš„ Parser ç®—æ³•
- [ ] èƒ½å¤Ÿä¼˜åŒ– Parser æ€§èƒ½

---

## ğŸ“– å­¦ä¹ è·¯å¾„

```
Day 1: ç†è§£ Parser åŸºç¡€
â”œâ”€â”€ é˜…è¯»ï¼š01-parser-overview.md
â”œâ”€â”€ é˜…è¯»ï¼š02-lexical-analysis.md
â”œâ”€â”€ å®è·µï¼šDemo 01 - Token ç”Ÿæˆå™¨
â””â”€â”€ ç»ƒä¹ ï¼šä¸ºä¸åŒè¯­è¨€ç”Ÿæˆ Token

Day 2: æŒæ¡è¯æ³•åˆ†æ
â”œâ”€â”€ æ·±å…¥å­¦ä¹ ï¼šè¯æ³•åˆ†æç®—æ³•
â”œâ”€â”€ å®è·µï¼šå®Œå–„ Tokenizer
â””â”€â”€ ç»ƒä¹ ï¼šæ·»åŠ æ›´å¤š Token ç±»å‹

Day 3: æŒæ¡è¯­æ³•åˆ†æ
â”œâ”€â”€ é˜…è¯»ï¼š03-syntax-analysis.md
â”œâ”€â”€ é˜…è¯»ï¼š04-parsing-algorithms.md
â”œâ”€â”€ å®è·µï¼šDemo 02 - è¡¨è¾¾å¼ Parser
â””â”€â”€ ç»ƒä¹ ï¼šæ·»åŠ æ›´å¤šè¿ç®—ç¬¦

Day 4: ç»¼åˆåº”ç”¨
â”œâ”€â”€ é˜…è¯»ï¼š05-build-ast.md
â”œâ”€â”€ å®è·µï¼šDemo 03 - JSON Parser
â”œâ”€â”€ å®è·µï¼šDemo 04 - Mini JS Parser
â””â”€â”€ ç»ƒä¹ ï¼šæ‰©å±•æ”¯æŒçš„è¯­æ³•

Day 5: æ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ é˜…è¯»ï¼š06-parser-performance.md
â”œâ”€â”€ å®è·µï¼šDemo 05 - Parser æ€§èƒ½å¯¹æ¯”
â””â”€â”€ æ€»ç»“ï¼šæ•´ç†å­¦ä¹ ç¬”è®°
```

---

## ğŸ¯ å­¦ä¹ é‡ç‚¹

### å¿…é¡»æŒæ¡çš„æ¦‚å¿µ
1. âœ… **Token çš„å®šä¹‰å’Œç±»å‹**
2. âœ… **è¯æ³•åˆ†æ vs è¯­æ³•åˆ†æ**
3. âœ… **é€’å½’ä¸‹é™è§£æ**
4. âœ… **è¿ç®—ç¬¦ä¼˜å…ˆçº§å¤„ç†**
5. âœ… **AST æ„å»ºè¿‡ç¨‹**

### å¿…é¡»æŒæ¡çš„æŠ€èƒ½
1. âœ… æ‰‹å†™ Tokenizer
2. âœ… æ‰‹å†™é€’å½’ä¸‹é™ Parser
3. âœ… å¤„ç†è¿ç®—ç¬¦ä¼˜å…ˆçº§
4. âœ… æ„å»º AST
5. âœ… é”™è¯¯å¤„ç†

### å¿…é¡»ç†è§£çš„åŸç†
1. âœ… Parser å¦‚ä½•å·¥ä½œ
2. âœ… å¦‚ä½•ä»æºä»£ç ç”Ÿæˆ AST
3. âœ… ä¸åŒ Parser ç®—æ³•çš„ä¼˜åŠ£
4. âœ… Parser çš„æ€§èƒ½ä¼˜åŒ–
5. âœ… ä¸ºä»€ä¹ˆ Rust Parser æ›´å¿«

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: Parser å’Œ Lexer çš„åŒºåˆ«ï¼Ÿ
- **Lexerï¼ˆè¯æ³•åˆ†æå™¨ï¼‰**ï¼šå°†æºä»£ç å­—ç¬¦ä¸²åˆ†å‰²æˆ Token æµ
- **Parserï¼ˆè¯­æ³•åˆ†æå™¨ï¼‰**ï¼šå°† Token æµç»„ç»‡æˆ AST

### Q2: ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªé˜¶æ®µï¼Ÿ
åˆ†ç¦»å…³æ³¨ç‚¹ï¼š
- Lexer å¤„ç†å­—ç¬¦å±‚é¢çš„ç»†èŠ‚ï¼ˆç©ºæ ¼ã€æ³¨é‡Šï¼‰
- Parser å¤„ç†è¯­æ³•ç»“æ„

### Q3: ä»€ä¹ˆæ˜¯é€’å½’ä¸‹é™è§£æï¼Ÿ
ä¸€ç§è‡ªé¡¶å‘ä¸‹çš„è§£æç®—æ³•ï¼Œä¸ºæ¯ä¸ªè¯­æ³•è§„åˆ™ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡é€’å½’è°ƒç”¨æ„å»º ASTã€‚

### Q4: å¦‚ä½•å¤„ç†è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Ÿ
1. åœ¨è¯­æ³•è§„åˆ™ä¸­æ˜ç¡®ä¼˜å…ˆçº§
2. ä½¿ç”¨ Pratt Parsing
3. ä½¿ç”¨ä¼˜å…ˆçº§è¡¨

### Q5: Parser çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ
1. å­—ç¬¦ä¸²æ“ä½œï¼ˆJavaScript æ…¢ï¼‰
2. é¢‘ç¹çš„å†…å­˜åˆ†é…
3. é€’å½’è°ƒç”¨æ ˆ
4. Lookahead è¿‡å¤š

---

## ğŸ”— å‚è€ƒèµ„æº

### åœ¨çº¿å·¥å…·
- [Esprima Parser Demo](https://esprima.org/demo/parse.html)
- [AST Explorer](https://astexplorer.net/)

### æ¨èé˜…è¯»
- [Crafting Interpreters](https://craftinginterpreters.com/)
- [the-super-tiny-compiler](https://github.com/jamiebuilds/the-super-tiny-compiler)
- [Let's Build a Compiler](https://compilers.iecc.com/crenshaw/)

### å®˜æ–¹æ–‡æ¡£
- [Babel Parser](https://babeljs.io/docs/en/babel-parser)
- [Acorn](https://github.com/acornjs/acorn)
- [SWC Parser](https://swc.rs/docs/usage/core#parse)

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬é˜¶æ®µåï¼Œç»§ç»­å­¦ä¹ ï¼š
- **Phase 17: Parser å®ç°å¯¹æ¯”** - å¯¹æ¯” Babel Parserã€Acornã€SWC Parser
- **Phase 18: Transformer** - æ·±å…¥å­¦ä¹ ä»£ç è½¬æ¢

---

**å‡†å¤‡å¥½æ·±å…¥ Parser çš„ä¸–ç•Œäº†å—ï¼Ÿ** ğŸ‰

